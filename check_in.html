<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP Form</title>
</head>
<body>

<form id="rsvpForm" onsubmit="submitRSVP(); return false;">
    <input type="text" id="name" name="name" placeholder="Name" required>
    <input type="text" id="class" name="class" placeholder="Class" required>
    <input type="radio" id="flight-yes" name="flight" value="1" required> Yes
    <input type="radio" id="flight-no" name="flight" value="0" required> No
    <select id="food" name="food" required>
        <option value="normal">Normal</option>
        <option value="vegan">Vegan</option>
        <option value="kosher">Kosher</option>
        <option value="halal">Halal</option>
    </select>
    <input type="submit" value="Submit">
</form>

<script type="text/javascript">
    function submitRSVP() {
        var name = document.getElementById('name').value;
        var classValue = document.getElementById('class').value;
        var flight = document.querySelector('input[name="flight"]:checked').value;
        var food = document.getElementById('food').value;

        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'submit_rsvp.php', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                if (xhr.responseText.trim() === 'success') {
                    window.location.href = 'confirmation.php';  // Redirect on success
                } else {
                    console.error('Error submitting RSVP:', xhr.responseText);
                }
            }
        };

        var params = 'name=' + encodeURIComponent(name) + '&class=' + encodeURIComponent(classValue) + '&flight=' + encodeURIComponent(flight) + '&food=' + encodeURIComponent(food);
        xhr.send(params);
    }
</script>


</body>
</html>
